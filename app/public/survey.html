<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>"FriendFinder" App - with a delightfully sinister twist...</title>

		<meta name="description" content="An interactive, themed 'Friend Matching' app built using Node.js and express and deployed to Heroku." />
		<meta name="keyword" content="javascript, node, express.js, game, matchmaker, heroku, Dexter, Showtime" />
		<meta name="author" content="Bonnie L. Hoffman, bonnieho@rice.edu" />
		<meta name="robots" content="noindex, nofollow" />
		<!-- favicon --> <link rel="shortcut icon" type="image/xicon" href="./images/Favicon.ico" />



		<!-- Latest compiled and minified CSS & JS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

		<!-- Font Awesome Glyphicons -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

		<!-- Chosen -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
		<link rel="stylesheet" href="/css/local_styles.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

	</head>
	<body>

		<div class="container">
			<div id="innerDiv">
				<h2>Survey Questions</h2>

				<hr>

				<h3><strong>About You</strong></h3>
				<h4>Name (Required)</h4>
				<input type="text" name="" id="name" class="form-control" required >

				<h4>Link to Photo Image (Required)</h4>
				<input type="text" name="" id="photo" class="form-control" required >

				<hr>
				
				<div class="wrap">
					<h3>Question 1</h3>
					<h4>How organized are you?</h4>
				 	<select data-placeholder="" class="chosen-select" id="q1">
				 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>

					<h3>Question 2</h3>
					<h4>How loyal are you?</h4>
				 	<select data-placeholder="" class="chosen-select" id="q2">
				 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>
				</div>

				<h3>Question 3</h3>
				<h4>How science-minded are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q3">
			 			<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>


				<h3>Question 4</h3>
				<h4>How artistic are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q4">
			 			<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>


				<h3>Question 5</h3>
				<h4>How much of a risk-taker are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q5">
			 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>


				<h3>Question 6</h3>
				<h4>How angry are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q6">
			 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>


				<h3>Question 7</h3>
				<h4>How outgoing are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q7">
			 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>

				<h3>Question 8</h3>
				<h4>How spiritual are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q8">
			 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>

				<h3>Question 9</h3>
				<h4>How patient are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q9">
			 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>

				<h3>Question 10</h3>
				<h4>How vindictive are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q10">
			 		<option value=""></option>
			            		<option value="5">5 (Strongly Agree)</option>
				   		<option value="4">4</option>
 				    		<option value="3">3</option>
				    		<option value="2">2</option>
 				    		<option value="1">1 (Strongly Disagree)</option>
			      		</select>

				<br />
				<br />

				<!-- Submit Button -->
				<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
		 Submit</button>
			</div>
		</div>	
			<hr>
		    <footer class="footer">
		      <div class="container">
			        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/bonnieho/FriendFinder">GitHub Repo</a></p>

			        <p class="col-sm-12 col-md-12 ital footer">
							&#064;2017-2019 <a href="mailto:bonnieho@rice.edu">Bonnie L. Hoffman</a>&#160;&#160;(Created as a requirement toward the completion of The University of Texas at Houston Coding Bootcamp)<br />
							SYNOPSIS: In this assignment, Express is used to handle routing with final app deployment to Heroku.<br />
							DISCLAIMER: The content of this exercise is used solely for educational purposes. The author has no affiliation with the Dexter television series, the Showtime network, or 'Darkly Dreaming Dexter' author Jeff Lindsay and his publishers, hence no assumption of endorsement of any of the aforementioned content owners should be implied.

						</p>
		      
		    </footer>
			
		</div>

		<!-- Modal -->
		<div id="resultsModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">

		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h2 class="modal-title"><strong>Best Match</strong></h2>
		      </div>
		      <div class="modal-body">
		        <h2 id="matchName"></h2>
		        <div id=holder>
		        	<img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
		        	<p id="matchBio"></p>
		       	</div>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>

		  </div>
		</div>

	  <script type="text/javascript">

	  	// Chosen CSS
	    var config = {
	      '.chosen-select'           : {},
	      '.chosen-select-deselect'  : {allow_single_deselect:true},
	      '.chosen-select-no-single' : {disable_search_threshold:10},
	      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
	      '.chosen-select-width'     : {width:"95%"}
	    }
	    for (var selector in config) {
	      $(selector).chosen(config[selector]);
	    }

	    // Capture the form inputs 
	    $("#submit").on("click", function(){

	    	// Form validation
	    	function validateForm() {
			  var isValid = true;
			  $('.form-control').each(function() {
			    if ( $(this).val() === '' )
			        isValid = false;
			  });

			  $('.chosen-select').each(function() {

			  	if( $(this).val() === "")
			  		isValid = false
			  })
			  return isValid;
			}

			// If all required fields are filled
			if (validateForm() == true)
			{
				// Create an object for the user's data
		    	var userData = {
		    		name: $("#name").val(),
		    		photo: $("#photo").val(),
		    		scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
		    	}


		    	// Grab the URL of the website
		    	var currentURL = window.location.origin;

		    	// AJAX post the data to the friends API. 
		    	$.post(currentURL + "/api/friends", userData, function(data){

		    		// Grab the result from the AJAX post so that the best match's name and photo are displayed.
		    		$("#matchName").text(data.name);
		    		$('#matchImg').attr("src", data.photo);
		    		// $("#matchBio").text(data.bio);
		    		$('#matchBio').html(data.bio);

			    	// Show the modal with the best match 
			    	$("#resultsModal").modal('toggle');

		    	});
			}
			else
			{
				alert("Please fill out all fields before submitting!");
			}
	    	
	    	return false;
	    });


	  </script>

	</body>
</html>