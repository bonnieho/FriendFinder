<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>"FriendFinder" App - with a delightfully sinister twist...</title>

		<meta name="description" content="An interactive, themed 'Friend Matching' app built using Node.js and express and deployed to Heroku." />
		<meta name="keyword" content="javascript, node, express.js, game, matchmaker, heroku, Dexter, Showtime" />
		<meta name="author" content="Bonnie L. Hoffman, bonnieho@rice.edu" />
		<meta name="robots" content="noindex, nofollow" />
		<!-- favicon --> <link rel="shortcut icon" type="image/xicon" href="./images/Favicon.ico" />

		<!-- Browser tab color setting - Chrome, Firefox OS and Opera -->
	    <meta name="theme-color" content="#900" />
	    <!-- Browser tab color setting - Windows Phone -->
	    <meta name="msapplication-navbutton-color" content="#900" />
	    <!-- Browser tab color setting - iOS Safari -->
	    <meta name="apple-mobile-web-app-status-bar-style" content="#900" />
	        
	    <!-- Rich Link Preview configuration below -->
	    <!-- <meta property="og:title" content="" />
	    <meta property="og:description" content="" />
	    <meta property="og:url" content="" />
	    <meta property="og:image" content="images/richpreview_200x300h.png" /> -->


		<!-- Latest compiled and minified CSS & JS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

		<!-- Font Awesome Glyphicons -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

		<!-- Google Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Contrail+One&#124;Fjalla+One&#124;Yanone+Kaffeesatz" rel="stylesheet">

		<!-- Chosen -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
		<link rel="stylesheet" href="css/local_styles.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

	</head>
	<body>

	<div class="container">

		<div id="innerDiv">
			<h2 class="bigitalsmcaps">Survey Questions</h2>

			<hr />
			
			<div class="row">

				<div class="col-md-3 col-lg-3"></div>

				<div class="col-sm-12 col-md-6 col-lg-6">
					<h3 class="ital"><strong>About You</strong></h3>
					<h4>Name (Required)</h4>
					<input type="text" name="userName" id="userName" class="form-control" required />
				</div>

				<div class="col-md-3 col-lg-3"></div>

					<!-- do I even want this? -->
					<!-- <h4>Link to Photo Image (Required)</h4> -->
					<!-- VALIDATION PROBLEM - cannot leave name empty -->
					<!-- <input type="text" name="" id="photo" class="form-control" required /> -->

				
			<!-- END row -->
			</div>

			<hr />
			
			<div class="col-sm-12 col-md-12 col-lg-12">
				
				<div class="row">
					<div class="col-sm-12 col-md-6 col-lg-6">

						<h3 class="ital">Question 1</h3>
						<h4>Would you consider yourself to be an organized person?</h4>
					 	<select data-placeholder="" class="chosen-select" id="q1">
				 			<option value="">Select an Option</option>
			            	<option value="5">5 (Strongly Agree)</option>
				   			<option value="4">4</option>
					    	<option value="3">3 (neutral)</option>
				    		<option value="2">2</option>
					    	<option value="1">1 (Strongly Disagree)</option>
				      	</select>

		      		</div>

		      		<div class="col-sm-12 col-md-6 col-lg-6">

						<h3 class="ital">Question 2</h3>
						<h4>Are you loyal to the people you care about?</h4>
					 	<select data-placeholder="" class="chosen-select" id="q2">
				 			<option value="">Select an Option</option>
			            	<option value="5">5 (Strongly Agree)</option>
				   			<option value="4">4</option>
					    	<option value="3">3 (neutral)</option>
				    		<option value="2">2</option>
					    	<option value="1">1 (Strongly Disagree)</option>
				      	</select>

		      		</div>

		      	<!-- END row -->
				</div>

			<div class="row">

				<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 3</h3>
					<!-- <h4>How strongly are you drawn to science?</h4> -->
					<h4>Are you detail-oriented?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q3">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

		      	</div>

		      	<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 4</h3>
					<h4>Would you consider yourself to be artistic?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q4">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

			    </div>
			<!-- END ROW -->
	      	</div>

	      	<div class="row">

	      		<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 5</h3>
					<h4>How much of a risk-taker are you?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q5">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

		      	</div>

		      	<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 6</h3>
					<h4>To what degree are you motived by anger?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q6">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

		      	</div>
			<!-- END ROW -->
	      	</div>

	      	<div class="row">

	      		<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 7</h3>
					<h4>Are you outgoing?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q7">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

		      	</div>

		      	<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 8</h3>
					<!-- <h4>How spiritual are you?</h4> -->
					<h4>Do you consider yourself to be spiritual?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q8">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

		     	 </div>
			<!-- END row -->
	      	</div>

	      	<div class="row marg">

	      		<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 9</h3>
					<h4>Are you a patient person?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q9">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

		      	</div>

		      	<div class="col-sm-12 col-md-6 col-lg-6">

					<h3 class="ital">Question 10</h3>
					<h4>Do you consider yourself to be vindictive?</h4>
			 		<select data-placeholder="" class="chosen-select" id="q10">
						<option value="">Select an Option</option>
			        	<option value="5">5 (Strongly Agree)</option>
			   			<option value="4">4</option>
				    	<option value="3">3 (neutral)</option>
			    		<option value="2">2</option>
				    	<option value="1">1 (Strongly Disagree)</option>
			      	</select>

		      	</div>
			<!-- END row -->
	      	</div>
		<!-- END parent div -->
	    </div>

			<br />
			<br />
			
			<div class="row marg">
				<!-- <div class="col-sm-1 col-md-1 col-lg-2"></div> -->
				<div class="col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
					<!-- Submit Button -->
					<button type="submit" class="btn-danger btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i> Submit</button>
				</div>
				<div class="col-sm-1 col-md-1 col-lg-2"></div>
			</div>

			<hr />

		<!-- END inner-div -->
		</div>	


	    <footer class="footer col-sm-12 col-md-12">
	        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/bonnieho/FriendFinder">GitHub Repo</a></p>
	        <p class="ital footer-text">
			&#064;2017-2019 <a href="mailto:bonnieho@rice.edu">Bonnie L. Hoffman</a>&#160;&#160;(Created as a requirement toward the completion of The University of Texas at Houston Coding Bootcamp)<br />
			SYNOPSIS: In this assignment, a compatibility-based "FriendFinder" application is created that takes in results from a survey and then compares the answers with those from other users to produce a potential "friend" based on similar character traits. Express is used to handle routing with final app deployment to Heroku.<br />
			DISCLAIMER: The content of this exercise is used solely for educational purposes. The author has no affiliation with the Dexter television series, the Showtime network, or 'Darkly Dreaming Dexter' author Jeff Lindsay and his publishers, hence no assumption of endorsement of any of the aforementioned content owners should be implied.
			</p>
	    </footer>	


		<!-- Modal -->
		<div id="resultsModal" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<!-- Modal content-->
				<div class="modal-content">
					<!-- my own modal-header as an id since I couldn't get the Bootstrap 3 class to flex with a relative height -->
					<div id="modal-header">
				    	<button type="button" class="close" data-dismiss="modal">&times;</button>
				    	<h2 class="modal-title"><strong>Best Match</strong> for <span id="playerName"></span><em>!</em></h2>
				  	</div>
				  	<div class="modal-body">
				    	<h2 id="matchName">&#160;</h2>
				    	<div id=holder>
				    		<div class="row">
				    			<div class="col-xs-11 col-xs-offset-0 col-sm-10 col-sm-offset-0 col-md-4 col-md-offset-0 col-lg-5"> 
					    			<img id="matchImg" src="images/placeholder.png" alt="">
					    		</div>
					    		<div class="col-xs-11 col-xs-offset-0 col-sm-10 col-sm-offset-0 col-md-7 col-md-offset-1 col-lg-offset-0 col-lg-7">
					    			<p id="matchBio"></p>
					    		</div>
					    	<!-- END row -->
		   					</div> 
				   		</div>
				   		
				  	</div>
				  	<div class="modal-footer">
				    	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				  	</div>
				<!-- END modal-content -->
				</div>
			<!-- END modal-dialog -->
			</div>
		<!-- END resultsModal -->
		</div>


	<!-- END container div -->
	</div>

		<script>

		  	// Chosen CSS
		    var config = {
		      '.chosen-select'           : {},
		      '.chosen-select-deselect'  : {allow_single_deselect:true},
		      '.chosen-select-no-single' : {disable_search_threshold:10},
		      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
		      '.chosen-select-width'     : {width:"95%"}
		    }
		    for (var selector in config) {
		      $(selector).chosen(config[selector]);
		    }

		    // Capture the form inputs 
		    $("#submit").on("click", function(){

		    	// populating the modal with the name the user has input
		    	var player = document.getElementById("userName").value;
				document.getElementById("playerName").innerHTML = (player);
				
			
		    	// Form validation
		    	function validateForm() {
				  var isValid = true;
				  $('.form-control').each(function() {
				    if ( $(this).val() === '' )
				        isValid = false;
				  });

				  $('.chosen-select').each(function() {

				  	if( $(this).val() === "")
				  		isValid = false
				  })
				  return isValid;
				}

				// If all required fields are filled
				if (validateForm() == true)
				{
					// Create an object for the user's data
					// does the photo thing need to work for an upload?!?
			    	var userData = {
			    		name: $("#name").val(),
			    		photo: $("#photo").val(),
			    		scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
			    	}


			    	// Grab the URL of the website
			    	var currentURL = window.location.origin;

			    	// AJAX post the data to the friends API. 
			    	$.post(currentURL + "/api/friends", userData, function(data){

			    		// Grab the result from the AJAX post so that the best match's name and photo are displayed.
			    		$("#matchName").text(data.name);
			    		$('#matchImg').attr("src", data.photo);
			    		// $("#matchBio").text(data.bio);
			    		$('#matchBio').html(data.bio);

				    	// Show the modal with the best match 
				    	$("#resultsModal").modal('toggle');

			    	});
				}
				else
				{
					alert("Please fill out all fields before submitting!");
				}
		    	
		    	return false;
		    });

		</script>

	</body>
</html>